# Руководство программиста
## Система управления служащими по контракту

### 1. Назначение и условия применения программы

#### 1.1 Назначение программы
Программа "Система управления служащими по контракту" предназначена для автоматизации учета и управления данными о служащих, работающих по контрактам. Программа обеспечивает:
- Ведение базы данных служащих с их персональными данными
- Автоматический расчет заработной платы на основе дневной ставки и продолжительности контракта
- Выполнение операций добавления, редактирования и удаления записей о служащих
- Отображение данных в табличном виде с возможностью сортировки

#### 1.2 Область применения
Программа применяется в организациях для:
- Кадровых служб предприятий
- Отделов по работе с персоналом
- Бухгалтерских служб для расчета заработной платы
- Административных подразделений

#### 1.3 Технические требования
**Минимальные системные требования:**
- Операционная система: Windows 10/11, Ubuntu 20.04+, macOS 11+
- Оперативная память: 512 МБ
- Свободное место на диске: 200 МБ
- Разрешение экрана: минимум 1024x768

**Программные зависимости:**
- Python 3.8+
- PyQt6
- SQLite3 (встроен в Python)

### 2. Характеристика программы

#### 2.1 Режим работы
Программа работает в интерактивном режиме с графическим пользовательским интерфейсом. Поддерживает:
- Однопользовательский режим работы
- Локальное хранение данных в файле базы данных SQLite
- Режим реального времени для отображения изменений

#### 2.2 Показатели производительности
- Время запуска программы: не более 3 секунд
- Время отклика на пользовательские действия: не более 1 секунды
- Максимальное количество записей: ограничено объемом доступной памяти
- Размер файла базы данных: растет пропорционально количеству записей

#### 2.3 Функциональные характеристики
- Автоматическая валидация вводимых данных
- Проверка уникальности личных номеров служащих
- Автоматический расчет заработной платы
- Защита от некорректного ввода данных

### 3. Обращение к программе

#### 3.1 Способы запуска программы

**Запуск из исходного кода:**
```bash
python app.py
```

**Запуск исполняемого файла:**
- Windows: `WorkerManagementApp.exe`
- Linux: `./WorkerManagementApp`
- macOS: открыть `WorkerManagementApp.app`

#### 3.2 Параметры запуска
Программа не требует дополнительных параметров командной строки. Все настройки выполняются через графический интерфейс.

#### 3.3 Завершение работы программы
Программа завершается:
- Закрытием главного окна
- Использованием стандартных средств операционной системы
- Все изменения автоматически сохраняются в базе данных

### 4. Входные и выходные данные

#### 4.1 Входные данные

**Структура записи о служащем:**
- `personal_number` (INTEGER) - Личный номер служащего (уникальный идентификатор)
- `full_name` (TEXT) - Полное имя служащего
- `contract_start_date` (TEXT) - Дата начала контракта в формате YYYY-MM-DD
- `contract_end_date` (TEXT) - Дата окончания контракта в формате YYYY-MM-DD
- `daily_wage` (REAL) - Дневная ставка заработной платы

**Требования к входным данным:**
- Личный номер: положительное целое число
- Полное имя: непустая строка
- Даты: формат YYYY-MM-DD, дата окончания должна быть позже даты начала
- Дневная ставка: положительное вещественное число

#### 4.2 Выходные данные

**Отображаемые данные:**
- Таблица со всеми служащими
- Рассчитанная заработная плата для каждого служащего
- Сообщения об ошибках и подтверждениях операций

**Формат хранения данных:**
- База данных SQLite в файле `workers.db`
- Кодировка: UTF-8

### 5. Сообщения программы

#### 5.1 Информационные сообщения
- "Worker added successfully" - служащий успешно добавлен
- "Worker updated successfully" - данные служащего обновлены
- "Worker deleted successfully" - служащий удален

#### 5.2 Сообщения об ошибках
- "Personal Number is required" - не заполнен личный номер
- "Full Name is required" - не заполнено полное имя
- "Start Date is required" - не заполнена дата начала контракта
- "End Date is required" - не заполнена дата окончания контракта
- "Daily Wage is required" - не заполнена дневная ставка
- "Date Format Error: [Field] must be in YYYY-MM-DD format" - неверный формат даты
- "Invalid [Field]" - некорректное значение поля
- "End date must be after start date" - дата окончания раньше даты начала
- "Personal number already exists" - личный номер уже существует
- "Please select a worker to update" - не выбран служащий для обновления
- "Please select a worker to delete" - не выбран служащий для удаления

#### 5.3 Диалоговые сообщения
- "Are you sure you want to delete this worker?" - подтверждение удаления служащего

### 6. Программная архитектура

#### 6.1 Структура модулей

**Основной модуль: app.py**
```python
class WorkerManagementApp(QMainWindow):
    """Главный класс приложения для управления служащими"""
```

**Основные методы класса:**
- `__init__()` - инициализация интерфейса и компонентов
- `load_data()` - загрузка данных из базы данных
- `populate_inputs(index)` - заполнение полей ввода при выборе записи
- `validate_inputs()` - валидация пользовательского ввода
- `add_worker()` - добавление нового служащего
- `update_worker()` - обновление данных служащего
- `delete_worker()` - удаление служащего
- `clear_inputs()` - очистка полей ввода

#### 6.2 Схема базы данных

```sql
CREATE TABLE IF NOT EXISTS workers (
    personal_number INTEGER PRIMARY KEY,
    full_name TEXT NOT NULL,
    contract_start_date TEXT NOT NULL,
    contract_end_date TEXT NOT NULL,
    daily_wage REAL NOT NULL
)
```

#### 6.3 Алгоритм расчета заработной платы

```python
# Расчет количества дней между датами
start_date = QDate.fromString(start_date_str, Qt.DateFormat.ISODate)
end_date = QDate.fromString(end_date_str, Qt.DateFormat.ISODate)
days_worked = start_date.daysTo(end_date)

# Расчет заработной платы
salary = days_worked * daily_wage
```

### 7. Используемые библиотеки и зависимости

#### 7.1 Основные библиотеки
- **PyQt6** - графический интерфейс пользователя
  - `QtWidgets` - виджеты интерфейса
  - `QtCore` - базовая функциональность Qt
  - `QtGui` - графические компоненты
- **sqlite3** - работа с базой данных SQLite
- **re** - регулярные выражения для валидации
- **os** - работа с операционной системой
- **sys** - системные функции Python

#### 7.2 Структура импортов
```python
import sys
from PyQt6.QtWidgets import (
    QApplication, QMainWindow, QVBoxLayout, QHBoxLayout, QWidget,
    QTableView, QPushButton, QLineEdit, QLabel, QMessageBox,
    QHeaderView, QAbstractItemView
)
from PyQt6.QtCore import Qt, QDate
from PyQt6.QtGui import QStandardItemModel, QStandardItem
import sqlite3
import re
import os
```

### 8. Рекомендации по разработке и модификации

#### 8.1 Добавление новых функций
- Следовать принципам объектно-ориентированного программирования
- Использовать существующие методы валидации для новых полей
- Обеспечивать обратную совместимость с существующей базой данных

#### 8.2 Модификация интерфейса
- Использовать стандартные виджеты PyQt6
- Поддерживать единообразие в дизайне
- Обеспечивать адаптивность интерфейса

#### 8.3 Работа с базой данных
- Использовать подготовленные запросы для предотвращения SQL-инъекций
- Обрабатывать исключения при работе с базой данных
- Регулярно создавать резервные копии файла `workers.db`

### 9. Сборка и развертывание

#### 9.1 Создание исполняемого файла
Используется PyInstaller с конфигурационным файлом `WorkerManagementApp.spec`:

```bash
pyinstaller WorkerManagementApp.spec
```

#### 9.2 Структура дистрибутива
- Исполняемый файл приложения
- Файл базы данных `workers.db` (создается автоматически)
- Документация пользователя

### 10. Тестирование и отладка

#### 10.1 Рекомендуемые тесты
- Тестирование валидации входных данных
- Проверка корректности расчета заработной платы
- Тестирование операций CRUD с базой данных
- Проверка обработки граничных случаев

#### 10.2 Отладочная информация
- Логирование ошибок базы данных
- Проверка целостности данных
- Мониторинг производительности при больших объемах данных
