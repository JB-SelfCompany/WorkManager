# Система управления служащими по контракту

## Структура проекта

### Основные файлы
1. `app.py` - Основной файл приложения, содержащий GUI и бизнес-логику.
2. `WorkerManagementApp.spec` - Файл спецификации PyInstaller для сборки приложения.
3. `workers.db` - Файл базы данных SQLite для хранения информации о работниках.

## Описание модулей

### app.py

#### Классы:
- **WorkerManagementApp**
  - Наследует от `QMainWindow`.
  - Управляет главным окном и взаимодействием с пользователем.

##### Основные методы:
- `__init__`: Инициализирует главное окно и настраивает компоненты UI.
- `load_data`: Загружает данные о работниках из базы данных и заполняет табличное представление.
- `populate_inputs`: Заполняет поля ввода при выборе строки таблицы.
- `validate_inputs`: Проверяет пользовательский ввод перед выполнением операций CRUD.
- `add_worker`: Добавляет нового работника в базу данных и обновляет табличное представление.
- `update_worker`: Обновляет данные существующего работника в базе данных.
- `delete_worker`: Удаляет выбранного работника из базы данных.
- `clear_inputs`: Очищает все поля ввода.

## Схема базы данных

### Таблица: workers
```sql
CREATE TABLE IF NOT EXISTS workers (
    personal_number INTEGER PRIMARY KEY,
    full_name TEXT NOT NULL,
    contract_start_date TEXT NOT NULL,
    contract_end_date TEXT NOT NULL,
    daily_wage REAL NOT NULL
)
```

## Зависимости

- PyQt6 - Фреймворк GUI
- sqlite3 - Управление базой данных
- re - Регулярные выражения для валидации ввода
- os - Интерфейсы операционной системы для работы с путями

## Архитектура приложения

### Шаблоны проектирования:
1. **MVC (Model-View-Controller)**
   - **Model**: База данных SQLite (`workers.db`)
   - **View**: Элементы GUI в `WorkerManagementApp`
   - **Controller**: Методы в `WorkerManagementApp`, обрабатывающие взаимодействие с пользователем

### Взаимодействие компонентов

#### Поток данных
```
База данных <-> WorkerManagementApp <-> Пользовательский интерфейс
```

#### Процесс обновления данных
```
Пользовательский ввод -> WorkerManagementApp -> База данных -> Обновление табличного представления
```

## Детали реализации

### 1. Управление данными
- Использует SQLite для локального хранения.
- Проверяет входные данные перед сохранением для обеспечения целостности данных.
- Поддерживает операции CRUD для управления записями служащих.

### 2. Пользовательский интерфейс
- Динамическое табличное представление, отображающее данные служащих и рассчитанные зарплаты.
- Поля ввода с проверкой в реальном времени.
- Кнопки действий для управления записями служащих.

### 3. Расчет зарплаты
- Рассчитывает зарплату на основе количества отработанных дней и дневной ставки.
- Отображает рассчитанную зарплату в табличном представлении.

### 4. Оптимизация производительности
- Эффективная загрузка данных и заполнение таблицы.
- Оптимизированные SQL-запросы для операций с базой данных.

## Руководство по разработке

### 1. Добавление новых функций
- Следовать паттерну MVC.
- Максимально использовать существующие классы и методы.
- Добавлять новые методы в соответствующие классы.

### 2. Модификация базы данных
- Поддерживать обратную совместимость.
- Документировать изменения схемы.
- При необходимости использовать миграции.

### 3. Тестирование
- Тщательно проверять входные данные.
- Тестировать граничные случаи (например, недопустимые даты, отрицательные ставки).
- Обеспечивать производительность на больших наборах данных.